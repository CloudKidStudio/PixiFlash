/*! Pixi Flash 0.1.0 */
!function(){"use strict";!function(a){var b=function(a,b,c){this.dom=b,this.symbols=[],this.libName=c||"lib",this.id=a,this.parseSymbols(b.text)},c=b.prototype;b.globalSymbols={},c.parseSymbols=function(a){for(var c=a.split(/[\(!]function\s*\(/),d=b.globalSymbols,e=0;e<c.length;++e)if(a=c[e]){var f=a.substring(0,a.indexOf(","));if(f)for(var g,h=new RegExp("\\("+f+".(\\w+)\\s*=","g"),i=h.exec(a);i;)g=i[1],this.symbols.push(g),d[g]=this.id,i=h.exec(a)}},c.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var a=b.globalSymbols,c=window[this.libName];this.symbols.forEach(function(b){delete a[b],delete c[b]}),this.symbols=null},namespace("pixiflash").FlashArt=b}(),function(){var a=include("springroll.Task"),b=include("pixiflash.FlashArt"),c=include("springroll.Application"),d=include("springroll.pixi.TextureAtlas"),e=include("PIXI.Texture"),f=function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.images=b.images,this.libName="pixiflash_lib",this.imagesName="pixiflash_images"},g=f.prototype=Object.create(a.prototype);f.test=function(a){return a.src&&a.src.search(/\.js$/i)>-1&&"pixi"==a.type&&"pixiflash.FlashArt"==a.format&&a.images&&Array.isArray(a.images)},g.start=function(a){for(var f,g,h=[],i=0,j=0;j<this.images.length;++j)if(this.images[j].atlas)g=this.images[j],f={atlas:this.filter(g.atlas),id:"asset_"+i++,type:"pixi"},g.image?f.image=this.filter(g.image):(f.alpha=this.filter(g.alpha),f.color=this.filter(g.color)),h.push(f);else if("createjs.SpriteSheet"==this.images[j].format)g=this.images[j].clone(),h.push(g),g.type||(g.type="pixi"),g.id||(g.id="asset_"+i++);else{if(g="string"==typeof this.images[j]?{image:this.filter(this.images[j])}:this.images[j].clone(),!g.id){var k=g.src||g.color,l=k.lastIndexOf(".");l>-1&&(k=k.substr(0,l));var m=k.lastIndexOf("/");m>-1&&(k=k.substr(m+1)),g.id=k}g.type="pixi",h.push(g)}var n={_flash:this.src};h.length&&(n._images={assets:h}),c.instance.load(n,function(c){var f=new b(this.id,c._flash,this.libName),g=c._images;if(g){var h=[],i=[],j=namespace(this.imagesName);for(var k in g){var l=g[k];if(h.push(l),l instanceof e)j[k]=l,i.push(k);else if(l instanceof d){var m=l.frames;for(var n in m)j[n]=m[n],i.push(n)}}f._orig_destroy=f.destroy,f.destroy=function(){var a;for(a=h.length-1;a>=0;--a)h[a].destroy?h[a].destroy():h[a].dispatchEvent("destroy");for(a=i.length-1;a>=0;--a)delete j[i[a]];f._orig_destroy()}}a(f)}.bind(this))},namespace("pixiflash").FlashArtTask=f}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("pixiflash.FlashArtTask",60)}}();}();