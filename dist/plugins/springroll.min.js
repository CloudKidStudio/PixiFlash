/*! Pixi Flash 0.2.9 */
!function(){"use strict";!function(a){var b=function(a,b,c,d){this.dom=b,this.symbols=[],this.libName=c||"lib",this.id=a,this.parseSymbols(b.text,d)},c=b.prototype;b.globalSymbols={},c.parseSymbols=function(a,c){for(var d=a.split(/[\(!]function\s*\(/),e=b.globalSymbols,f=0;f<d.length;++f)if(a=d[f]){var g=a.substring(0,a.indexOf(","));if(g)for(var h,i=new RegExp("\\("+g+".(\\w+)\\s*=","g"),j=i.exec(a);j;)h=j[1],this.symbols.push(h),e[h]=this.id,j=i.exec(a)}},c.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var a=b.globalSymbols,c=window[this.libName];this.symbols.forEach(function(b){delete a[b],delete c[b]}),this.symbols=null},namespace("pixiflash").FlashArt=b}(),function(){var a=include("springroll.Task"),b=include("pixiflash.FlashArt"),c=include("springroll.pixi.TextureAtlas"),d=include("PIXI.Texture"),e=function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.images=b.images,this.libName="pixiflash_lib",this.imagesName="pixiflash_images",this.suppressWarnings=!!b.suppress},f=extend(e,a);e.test=function(a){return a.src&&a.src.search(/\.js$/i)>-1&&"pixi"==a.type&&"pixiflash.FlashArt"==a.format&&a.images&&Array.isArray(a.images)},f.start=function(a){for(var e,f,g=[],h=0,i=0;i<this.images.length;++i)if(this.images[i].atlas)f=this.images[i],e={atlas:this.filter(f.atlas),id:"asset_"+h++,type:"pixi"},f.image?e.image=this.filter(f.image):(e.alpha=this.filter(f.alpha),e.color=this.filter(f.color)),g.push(e);else if("pixiflash.SpriteSheet"==this.images[i].format){if(f=this.images[i].clone(),g.push(f),f.type||(f.type="pixi"),!f.id){var j=f.src;j=j.substr(0,j.lastIndexOf(".")),j=j.substr(j.lastIndexOf("/")+1),f.id=j}}else{if(f="string"==typeof this.images[i]?{image:this.filter(this.images[i])}:this.images[i].clone(),!f.id){var k=f.src||f.color,l=k.lastIndexOf(".");l>-1&&(k=k.substr(0,l));var m=k.lastIndexOf("/");m>-1&&(k=k.substr(m+1)),f.id=k}f.type="pixi",g.push(f)}var n={_flash:this.src};g.length&&(n._images={assets:g}),this.load(n,function(e){var f=new b(this.id,e._flash,this.libName,this.suppressWarnings),g=e._images;if(g){var h=[],i=[],j=namespace(this.imagesName);for(var k in g){var l=g[k];if(h.push(l),l instanceof d)j[k]=l,i.push(k);else if(l instanceof c){var m=l.frames;for(var n in m)j[n]=m[n],i.push(n)}}f._orig_destroy=f.destroy,f.destroy=function(){var a;for(a=h.length-1;a>=0;--a)h[a].destroy?h[a].destroy():h[a].dispatchEvent("destroy");for(a=i.length-1;a>=0;--a)delete j[i[a]];f._orig_destroy()}}a(f)}.bind(this))},namespace("pixiflash").FlashArtTask=e}(),function(a){var b=include("pixiflash.MovieClip"),c=include("springroll.AnimatorInstance"),d=include("springroll.GenericMovieClipInstance"),e=function(){d.call(this)};e.test=function(a){return a instanceof b},e.hasAnimation=d.hasAnimation,e.getDuration=d.getDuration;var f=(d.prototype,c.extend(e,d));f._Generic_beginAnim=f.beginAnim,f.beginAnim=function(a,b){this._Generic_beginAnim(a,b),this.clip._updateTimeline()},f._Generic_setPosition=f.setPosition,f.setPosition=function(a){this._Generic_setPosition(a),this.clip._updateTimeline()},namespace("pixiflash").MovieClipInstance=e}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("pixiflash.FlashArtTask",60),this.assetManager.register("pixiflash.SpriteSheetTask",70),this.animator.register("pixiflash.MovieClipInstance",10)}}(),function(){var a=include("springroll.LoadTask"),b=include("pixiflash.SpriteSheet"),c=(include("springroll.pixi.TextureAtlas"),include("PIXI.Texture"),function(b){a.call(this,b,b.src)}),d=(a.prototype,extend(c,a));c.test=function(a){return a.src&&a.src.search(/\.json$/i)>-1&&"pixi"==a.type&&"pixiflash.SpriteSheet"==a.format},d.start=function(a){this.load(this.src,function(c){var d=[];c.images.forEach(function(a){"string"==typeof a&&(a={image:a,type:"pixi"}),d.push(a)});var e=this.id;this.load(d,function(d){c.images.forEach(function(a,b){c.images[b]=d[b].baseTexture});var f=new b(c);f.addToGlobal(e),a(f)})}.bind(this))},namespace("pixiflash").SpriteSheetTask=c}();}();