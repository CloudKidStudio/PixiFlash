/*! Pixi Flash 0.1.0 */
!function(){"use strict";!function(a){if(!a.PIXI)throw"Requires PIXI";if(!a.createjs||!createjs.Tween)throw"Requires TweenJS";a.pixiflash||(a.pixiflash={Rectangle:PIXI.Rectangle,Tween:createjs.Tween,Ease:createjs.Ease}),a.pixiflash_lib||(a.pixiflash_lib={}),a.pixiflash_images||(a.pixiflash_images={})}(window),function(a){var b=PIXI.Point,c=0,d=function(){this.id=++c,this._isPixiFlash=!0,this.skew=new b,this._rotation=0,this._srB=0,this._srC=0,this._crA=1,this._crD=1,this._cachedRotY=0,this._cachedRotX=0,this.tickEnabled=!0,this.removeAllListeners()},e=d.prototype,f=Math.PI/180,g=180/Math.PI,h=2*Math.PI;Object.defineProperties(e,{skewX:{enumerable:!0,get:function(){return this.skew.x*g},set:function(a){this.skew.x=a*f}},skewY:{enumerable:!0,get:function(){return this.skew.y*g},set:function(a){this.skew.y=a*f}},rotation:{enumerable:!0,get:function(){return this._rotation*g},set:function(a){this._rotation=a*f}},scaleX:{enumerable:!0,get:function(){return this.scale.x},set:function(a){this.scale.x=a}},scaleY:{enumerable:!0,get:function(){return this.scale.y},set:function(a){this.scale.y=a}},regX:{enumerable:!0,get:function(){return this.pivot.x},set:function(a){this.pivot.x=a}},regY:{enumerable:!0,get:function(){return this.pivot.y},set:function(a){this.pivot.y=a}}}),e.displayObjectUpdateTransform=function(){var a,b,c,d,e,f,g=this.parent.worldTransform,i=this.worldTransform,j=this._rotation+this.skew.y,k=this._rotation+this.skew.x;j%h||k%h?((k!==this._cachedRotX||j!==this._cachedRotY)&&(this._cachedRotX=k,this._cachedRotY=j,this._crA=Math.cos(j),this._srB=Math.sin(j),this._srC=Math.sin(-k),this._crD=Math.cos(k)),a=this._crA*this.scale.x,b=this._srB*this.scale.x,c=this._srC*this.scale.y,d=this._crD*this.scale.y,e=this.position.x,f=this.position.y,(this.pivot.x||this.pivot.y)&&(e-=this.pivot.x*a+this.pivot.y*c,f-=this.pivot.x*b+this.pivot.y*d),i.a=a*g.a+b*g.c,i.b=a*g.b+b*g.d,i.c=c*g.a+d*g.c,i.d=c*g.b+d*g.d,i.tx=e*g.a+f*g.c+g.tx,i.ty=e*g.b+f*g.d+g.ty):(a=this.scale.x,d=this.scale.y,e=this.position.x-this.pivot.x*a,f=this.position.y-this.pivot.y*d,i.a=a*g.a,i.b=a*g.b,i.c=d*g.c,i.d=d*g.d,i.tx=e*g.a+f*g.c+g.tx,i.ty=e*g.b+f*g.d+g.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},e.setTransform=function(a,b,c,d,e,f,g,h,i){return this.position.x=a||0,this.position.y=b||0,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.pivot.x=h||0,this.pivot.y=i||0,this},d.mixin=function(a){for(var b in e){var c=Object.getOwnPropertyDescriptor(e,b);c?Object.defineProperty(a,b,c):a[b]=e[b]}},pixiflash.DisplayObject=d}(),function(a){var b=PIXI.Container,c=pixiflash.DisplayObject,d=PIXI.ticker.shared,e=function(){b.call(this),c.call(this),this.tickChildren=!0,this.once("added",function(){this._tickListener=this._tickListener.bind(this),this._onAdded(),this._onAdded=this._onAdded.bind(this),this._onRemoved=this._onRemoved.bind(this),this.on("added",this._onAdded),this.on("removed",this._onRemoved)}.bind(this))},f=e.prototype=Object.create(b.prototype);c.mixin(f),f.initialize=e,f._onAdded=function(){this.parent._isPixiFlash||d.add(this._tickListener)},f._tickListener=function(a){var b=a/d.speed/PIXI.TARGET_FPMS;this._tick(b)},f._onRemoved=function(){this._tickListener&&d.remove(this._tickListener)},f._tick=f.Container__tick=function(a){if(this.tickChildren)for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c.tickEnabled&&c._tick?c._tick(a):c.tickChildren&&c.Container__tick&&c.Container__tick(a)}},pixiflash.Container=e}(),function(a){var b=PIXI.Sprite,c=pixiflash.DisplayObject,d=function(a){b.call(this,a),c.call(this)},e=d.prototype=Object.create(b.prototype);c.mixin(e),e.initialize=d,pixiflash.Bitmap=d}(),function(a){function b(){throw"MovieClipPlugin cannot be instantiated."}var c=PIXI.Container,d=pixiflash.DisplayObject,e=createjs.Timeline,f=createjs.Tween,g=PIXI.ticker.shared,h=function(a,b,f,g){c.call(this),d.call(this),this.tickChildren=!0,this.mode=a||h.INDEPENDENT,this.startPosition=b||0,this.loop=f,this.currentFrame=0,this.timeline=new e(null,g,{paused:!0,position:b,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._framerate=0,this._duration=0,this._managed={},this.once("added",function(){this._tickListener=this._tickListener.bind(this),this._onAdded(),this._onAdded=this._onAdded.bind(this),this._onRemoved=this._onRemoved.bind(this),this.on("added",this._onAdded),this.on("removed",this._onRemoved)}.bind(this))};h.INDEPENDENT="independent",h.SINGLE_FRAME="single",h.SYNCHED="synched";var i=h.prototype=Object.create(c.prototype);d.mixin(i),i.initialize=h,i._onAdded=function(){this.parent._isPixiFlash||g.add(this._tickListener)},i._tickListener=function(a){var b=a/g.speed/PIXI.TARGET_FPMS;this._tick(b)},i._onRemoved=function(){this._tickListener&&g.remove(this._tickListener)},i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()};try{Object.defineProperties(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel}})}catch(j){}Object.defineProperty(i,"elapsedTime",{get:function(){return this._t},set:function(a){this._t=a}}),Object.defineProperty(i,"framerate",{get:function(){return this._framerate},set:function(a){a>0?(this._framerate=a,this._duration=a?this.timeline.duration/a:0):this._framerate=this._duration=0}}),i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},i.gotoAndStop=function(a){this.paused=!0,this._goto(a)},i.advance=function(a){var b=h.INDEPENDENT;if(this.mode==b){if(!this._framerate){for(var c=this,d=c._framerate;(c=c.parent)&&!d;)c.mode==b&&(d=c._framerate);this.framerate=d}this.paused||(this._framerate>0?(a&&(this._t+=.001*a),this._t>this._duration&&(this._t=this.timeline.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate+1e-8),this._prevPosition>this.timeline.duration&&(this._prevPosition=this.timeline.duration)):this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline())}},i._tick=function(a){this.tickEnabled&&this.advance(a),this.Container__tick(a)},i.Container__tick=function(a){if(this.tickChildren)for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c.tickEnabled&&c._tick?c._tick(a):c.tickChildren&&c.Container__tick&&c.Container__tick(a)}},i._goto=function(b){var c=this.timeline.resolve(b);null!==c&&c!==a&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=c,this._framerate>0?this._t=c/this._framerate:this._t=0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},i._updateTimeline=function(){var a=this.timeline,b=this.mode!=h.INDEPENDENT;if(a.loop=this.loop?this.loop:!0,b?a.setPosition(this.startPosition+(this.mode==h.SINGLE_FRAME?0:this._synchOffset),f.NONE):a.setPosition(this._prevPos<0?0:this._prevPosition,this.actionsEnabled?null:f.NONE),this._prevPosition=a._prevPosition,this._prevPos!=a._prevPos){this.currentFrame=this._prevPos=a._prevPos;for(var d in this._managed)this._managed[d]=1;for(var e=a._tweens,g=0,i=e.length;i>g;g++){var j=e[g],k=j._target;if(k!=this&&!j.passive){var l=j._stepPosition;k instanceof c?this._addManagedChild(k,l):this._setState(k.state,l)}}var m=this.children;for(g=m.length-1;g>=0;g--){var n=m[g].id;1==this._managed[n]&&(this.removeChildAt(g),delete this._managed[n])}}},i._setState=function(a,b){if(a)for(var c=a.length-1;c>=0;c--){var d=a[c],e=d.t,f=d.p;for(var g in f)e[g]=f[g];this._addManagedChild(e,b)}},i._addManagedChild=function(a,b){a._off||(this.addChildAt(a,0),a instanceof h&&(a._synchOffset=b,a._updateTimeline(),a.mode==h.INDEPENDENT&&a.autoReset&&!this._managed[a.id]&&a._reset()),this._managed[a.id]=2)},pixiflash.MovieClip=h,b.priority=100,b.install=function(){f.installPlugin(b,["startPosition"])},b.init=function(a,b,c){return c},b.step=function(){},b.tween=function(a,b,c,d,e,f,g,i){return a.target instanceof h?1==f?e[b]:d[b]:c}}(),function(){var a=PIXI.Rectangle,b=PIXI.Texture,c=PIXI.loaders.Loader,d=function(a){this.frames=[],this._id=null,a&&this._addFrames(a)},e=d.prototype;e._addFrames=function(c){for(var d,e=0;e<c.frames.length;e++)d=c.frames[e],this.frames.push(new b(c.images[d[4]||0],new a(d[0],d[1],d[2],d[3])))},e.getFrame=function(a){return this.frames[a]||null},e.destroy=function(){this._id&&(delete window.ss[this._id],this._id=null),this.frames&&(this.frames.forEach(function(a){a.destroy(!0)}),this.frames=null)},e.addToGlobal=function(a){window.ss=window.ss||{},this._id=a,window.ss[a]=this},d.fromData=function(a,b){for(var e,f,g=new d,h={frames:a.frames.slice(),images:a.images.slice()},i=new c,j=0;j<h.images.length;j++)if(f=h.images[j],i.add(f,f),!e){e=f;var k=e.indexOf("/");k>-1&&(e=f.substr(k+1)),e=e.substr(0,e.lastIndexOf(".")),g.addToGlobal(e)}i.once("complete",function(a,c){for(var d in c){var e=h.images.indexOf(d);h.images[e]=c[d].texture.baseTexture}g._addFrames(h),b(g)}),i.load()},pixiflash.SpriteSheet=d}(),function(a){var b=PIXI.Sprite,c=pixiflash.DisplayObject,d=function(){b.call(this),c.call(this),this.spriteSheet=null},e=d.prototype=Object.create(b.prototype);c.mixin(e),e.initialize=d,e.gotoAndStop=function(a){if(!this._initialized){var b=this.spriteSheet;this.initialize(),this.spriteSheet=b,this._initialized=!0}if(!this.spriteSheet)throw"Sprite doesn't have a spriteSheet";this.texture=this.spriteSheet.getFrame(a)},pixiflash.Sprite=d}(),function(a){var b={};b.addImages=function(b){var c;for(var d in b.textures)c=d.replace(".png",""),a.pixiflash_images[c]=b.textures[d]},pixiflash.utils=b}(window);}();